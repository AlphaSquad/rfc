## Binning evaluation container

 * Version:    0.9.0
 * Maintainer: Peter Belmann <pbelmann@cebitec.uni-bielefeld.de>

### Contents

* Outline
* Inputs
  * General definition
     * Description 
     * Mounts
  * binning
  * scaffold_contig_mapping
  * ncbi_taxonomy
* Outputs 
* Example

### Outline

This specification describes the interface for containerised binning evaluation applications. 
A binning evaluation application should validate the assigned [BIN and/or TAXID ids](https://github.com/bioboxes/rfc/blob/master/data-format/binning.mkd#the-binning-output-format) 
of a binning container.

In addition to the specifications described below, this container MUST implement the
specifications defined in ['Generic bioinformatics container'](https://github.com/bioboxes/rfc/blob/master/rfc.mkd#generic-bioinformatics-container). 


### Inputs

#### General Definition

A biobox requires an input YAML that the following definition 

```YAML
---
version: NUMBER.NUMBER.NUMBER
arguments:
  - fasta: LIST (one entry)
  - binning: LIST (two entries)
  - scaffold_contig_mapping (one entry)
  - ncbi_taxonomy (one entry)
```

##### Description:

* **version**: The current version is specified directly under the heading.
* **arguments**: The arguments field consists out of the following fields 
       * fasta
       * binning
       * scaffold_contig_mapping
       * ncbi_taxonomy       
       
       You can find a definition for every field below this section.

##### Mounts:
 * The .yaml MUST be mounted to /bbx/input/biobox.yaml.
 * Your output directory MUST be mounted to /bbx/output.
 * Your input files MUST be mounted to /bbx/input. 

#### fasta definition:

```YAML
- value: STRING
  id: STRING or NUMBER
  type: contig or scaffold
```

##### Description:
* **value**: This is the path to a fasta file containing the contigs relative to your mounted output directory.
* **id**: A unique id for every entry in the fasta list.
* **type**: Two options:
  * **contig**
  * **scaffold**

#### binning definition:

```YAML
- value: STRING
  type: Boolean
```

##### Description:
* **value**: This is the path to a [binning file](https://github.com/pbelmann/rfc/blob/master/data-format/binning.mkd).
* **type**: Type represents a boolean:
  * **true** : Binning file contains the true binning and/or taxonomic assignments.
  * **false** : Binning file contains the computed binning and/or taxonomic groups.

#### scaffold_contig_mapping definition:

```YAML
- value: STRING
```

##### Description:

* **value**: This specifies the path to a tab separated file with the scaffold name in the first column and the contig name in the second column. The sequence names have to be equal to the sequence names specified in the FASTA file.

#### ncbi_taxonomy definition:

```YAML
- value: STRING
```

##### Description:

* **value**: This specifies the path to a directory with the ncbi [taxonomy database](ftp://ftp.ncbi.nih.gov/pub/taxonomy/taxdump.tar.gz) containing .dmp files.

### Outputs

The biobox produces on a successful run a `biobox.yaml` and can be found in the `bbx` directory in your mounted output directory. The output biobox.yaml must be in an evaluation specific [format](https://github.com/pbelmann/rfc/blob/master/data-format/binning.mkd).

### Example for input biobox.yaml

```YAML
---
version: 0.9.0
arguments:
   - fasta:
      - value: "/path/to/lib1"
        id: "pe_1"
        type: contig
   - binning:
      - value: "/path/to/binning/file"
        type: false
      - value: "/path/to/true/binning/file"
        type: true
   - scaffold_contig_mapping:
      - value: "/path/to/binning/file/mapping"
   - ncbi_taxonomy
      - value: "/path/to/ncbi/taxonomy"
```
